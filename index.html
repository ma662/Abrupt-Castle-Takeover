<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Simple RPG Game</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
        <script src="main.js"></script> -->
        <script
        src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>

    </head>
    <body>
        <div>
            Simple RPG
        </div>

        <style>
            .background {
                position: fixed;
                padding: 0;
                margin: 0;

                bottom: 0;
                left: 0;
                z-index: -25;
            }

            .character-attacking {
                position: relative;
            }

            .character-selection {
                position: relative;
            }


            /* FIX THIS CLUSTERFUCK */
            .foe-selection {
                position: relative;
                display: inline-block;
                bottom: 0px;
                left: 0;
                right: 0;
            }

            .foe-center {
                display: inline-block;
                bottom: 0;
                left: 0;
                right: 0;
                /* top: 0; */

                position: fixed;
                margin-left: auto;
                margin-right: auto;
            }

            /* Friend Cards */
            .dynamic-character-card {
                width: 375px;
                height: 200px;
                display: inline-block;
                margin-left: 1%;
                padding: 0.5em; 

                /* Try this crazy shit
                position: absolute;
                margin-left: auto;
                margin-right: auto;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0; */

                background-color: thistle;
                border-color: darkolivegreen;
                border-style: double;
                border-width: 3px;
            }
            .dynamic-character-card:hover {
                opacity: 0.70;
            }

            .char-data {
                position: relative;
                color: darkslategray;
                margin: 0;
                padding: 0;
                text-align: end;
            }

            .character-image {
                width: 150px;
                height: 150px;

                border: 5px inset darkslategray;
            }


            /* Foe Cards */
            .dynamic-foe-card {
                width: 375px;
                height: 200px;
                display: inline-block;
                margin-left: 1%;
                padding: 0.5em; 

                /* Try this crazy shit
                position: absolute;
                margin-left: auto;
                margin-right: auto;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0; */

                background-color: rgb(54, 2, 54);
                border-color: darkolivegreen;
                border-style: double;
                border-width: 3px;
            }
            .dynamic-foe-card:hover {
                opacity: 0.70;
            }
            .foe-data {
                position: relative;
                color: darkslategray;
                margin: 0;
                padding: 0;
                text-align: end;
            }
            .foe-image {
                /* stuff */
                background-color: teal;
            }

        </style>

        <div class="content-container">
            <div class="character-selection"></div>
            
                <div class="character-attacking"> 
                    <!-- Character Attacking Div  -->
                </div>

                <div> Opponent Defender Area </div>

            <div class="foe-selection">
                <div class="foe-center"></div> 
            </div>

        </div>

        <!-- Hide This For Now -->
        <!-- <img class="background" src="./assets/images/dungeon.png"/> -->


        <script type="text/javascript">

        var game = {
        //========================================
        // Variables for processing
        //========================================
        
        wins: 0,
        losses: 0,
        
        // increments after every attack function call
        attackCounter: 0,
        remainingEnemies: 0,

        // characters object of character objects
        characters: {
            character1: {
                name: "Ser Antoni Bruschatti",
                hp: 16,
                currentHp: this.hp,
                attackPower: 9,
                uniqueAttack: "Sting of the Brush",
                uniqueImage: "./assets/images/friends/cristobal_rojas1.png"
            },

            character2: {
                name: "Ser Quandi Liv",
                hp: 10,
                currentHp: this.hp,
                attackPower: 12,
                uniqueAttack: "Philosophical Quandary",
                uniqueImage: "./assets/images/friends/domenikos_theotokopoulos1.png"
            },

            character3: {
                name: "Ser Malcox-Grave",
                hp: 16,
                currentHp: this.hp,
                attackPower: 9,
                uniqueAttack: "Piercing Sword of the Heavens",
                uniqueImage: "./assets/images/friends/edmund_blair_leighton2.png"
            }
        },

        foes: {
            foe1: {
                name: "name1",
                hp: 20,
                currentHp: this.hp,
                counterAp: 4,
                uniqueImage: "./assets/images/foes/giovanni_battista_tiepolo1.png"
            },
            
            foe2: {
                name: "name2",
                hp: 18,
                currentHp: this.hp,
                counterAp: 9,
                uniqueImage: "./assets/images/foes/konstantin_makovsky1.png"
            },
            
            foe3: {
                name: "name3",
                hp: 12,
                currentHp: this.hp,
                counterAp: 10,
                uniqueImage: "./assets/images/foes/hayez_francesco1.png"
            }
        },


        initialize: function() {
            $(".character-attacking").hide();   // move to initialization function

        },

        // get the data from characters and populate the character selection div
        spawnCharacters: function() {
            // for the length of the characters object
            for (var i = 0; i < Object.keys(game.characters).length; i++) {
                var characterDiv = $("<div>");
                var characterImage = $("<img>");
                
                // create css style for this class so it doesn't take up the whole line 
                characterDiv.addClass("dynamic-character-card");
                
                // character is the value from characters object at character key
                character = this.characters[Object.keys(this.characters)[i]];

                // link the character object image to the characterImage
                characterImage.attr("src", character.uniqueImage);

                // acts as a jQuery hook and a css styling thing
                characterImage.addClass("character-image");

                // provide character object, now image has all character data
                characterDiv.attr("data-character", character);
                characterImage.appendTo(characterDiv);
                
                // add to character-selection div
                $(".character-selection").append(characterDiv);
                
                // display data
                var name = character.name;
                var hp = character.hp;
                var attackPower = character.attackPower;
                var uniqueAttack = character.uniqueAttack;
                    
                var nameInfo = $("<p>");
                nameInfo.addClass("char-data");
                nameInfo.attr("id", "name-info");

                var hpInfo = $("<p>");
                hpInfo.addClass("char-data");
                hpInfo.attr("id", "hp-info");

                var apInfo = $("<p>");
                apInfo.addClass("char-data");
                apInfo.attr("id", "ap-info");

                var uaInfo = $("<p>");
                uaInfo.addClass("char-data");
                uaInfo.attr("id", "ua-info");

                nameInfo.text(name);
                hpInfo.text("HP: " + hp + "/" + hp); // 16/16
                apInfo.text("Attack-Power: " + attackPower);
                uaInfo.text(uniqueAttack);

                nameInfo.appendTo(characterDiv);
                hpInfo.appendTo(characterDiv);
                apInfo.appendTo(characterDiv);
                uaInfo.appendTo(characterDiv);

                // after loading in, run selectCharacter and wait for player selection
                this.selectCharacter();
            }

        },
        

        // select character function
        selectCharacter: function() {

            var activeCharacter;                // the fighting character

            $('.dynamic-character-card').off().on('click',function(){

            // when player selects character
            //$(".dynamic-character-card").on("click", function() {
                // hide selection char data
                $(".char-data").hide();

                activeCharacter = $(this);

                console.log("aC is: " + activeCharacter);

                // move selected character to character-attacking div
                activeCharacter.appendTo(".character-attacking");

                // slideUp character selection
                $(".character-selection").slideUp(270);

                // absolutely center the activeCharacter
                 activeCharacter.css({
                    "top": 0,
                    "left": 0,
                    "right": 0,
                    "bottom": 0,
                    "position": "absolute",
                    "margin-left": "auto",
                    "margin-right": "auto",
                });

                // fadeIn character attacking & their data
                $(".character-attacking").fadeIn(1000);
                $(".char-data").fadeIn(350);
                
                console.log("TEST1 WOOOOOOOO ~~`");

                game.spawnFoes();
            });
        },
        
        spawnFoes: function() {
            console.log("AM I RUNNING TWICE? OR WHAT");

            // fadeIn the foes
            for (var i = 0; i < Object.keys(game.foes).length; i++) {
                var foeDiv = $("<div>");
                var foeImage = $("<img>");

                foeDiv.addClass("dynamic-foe-card");

                foe = game.foes[Object.keys(game.foes)[i]];
                
                foeImage.attr("src", foe.uniqueImage);

                // acts as a jQuery hook and a css styling thing
                foeImage.addClass("foe-image");

                // provide foe object, now image has all foe data
                foeDiv.attr("data-foe", foe);
                foeImage.appendTo(foeDiv);

                $(".foe-center").append(foeDiv);
            }
        },

        // selectFoe: function() { 
        //     // spawn 
            
            
            
        //     // fadeIn the options available to player
        //         // fight
        //         // run
        // },
        
        }; // end game object
        
        game.initialize();
        game.spawnCharacters();
        
        </script>
        
    </body>
</html>